{
  "name": "product-campaign-workflow",
  "nodes": [
    {
      "parameters": {
        "resource": "image",
        "operation": "analyze",
        "modelId": {
          "__rl": true,
          "value": "chatgpt-4o-latest",
          "mode": "list",
          "cachedResultName": "CHATGPT-4O-LATEST"
        },
        "text": "Describe the product and brand in this image in full detail. Fully ignore the background. Focus ONLY on the product.",
        "imageUrls": "={{ $json.upload_assets }}",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.openAi",
      "typeVersion": 1.8,
      "position": [1328, 448],
      "id": "20cdb32b-701a-422a-8957-27c9a8418d8b",
      "name": "Analyze image",
      "credentials": {
        "openAiApi": {
          "id": "U46LK5mxeA2mY2dB",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "fieldToSplitOut": "upload_assets",
        "options": {}
      },
      "type": "n8n-nodes-base.splitOut",
      "typeVersion": 1,
      "position": [928, 400],
      "id": "e2e129f5-6b33-472a-a490-c8e7dfc00e6e",
      "name": "Split Out Uploaded Asset"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "n8n-nodes-base.splitInBatches",
      "typeVersion": 3,
      "position": [1152, 400],
      "id": "5fafd103-6983-4c1f-a3ec-9954ec992d6d",
      "name": "Loop Over Image Asset"
    },
    {
      "parameters": {
        "jsCode": "// Get upload_assets (can be string or array)\nconst upload = $input.first().json.upload_assets;\n\n// Normalize to an array\nconst parts = Array.isArray(upload) ? upload : [upload];\n\n// Build a flat list of URLs\nconst urls = parts\n  .filter(v => typeof v === 'string')\n  .flatMap(s => s.split(','))        // if your env complains about flatMap, use the reduce version below\n  .map(s => s.trim())\n  .filter(Boolean);\n\n// Format with quotes + new lines\nconst formattedUrls = urls.map(u => `\"${u}\"`).join(',\\n');\n\nreturn { formattedUrls, urls };\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [2272, 400],
      "id": "a7a0f654-471e-4735-b0a1-3c4516275049",
      "name": "Code"
    },
    {
      "parameters": {
        "modelId": {
          "__rl": true,
          "value": "gpt-5",
          "mode": "list",
          "cachedResultName": "GPT-5"
        },
        "messages": {
          "values": [
            {
              "content": "=Here is the user request for the Images to be created:\n{{ $('Get many rows1').item.json.ai_images_instructions }}\n\nHere is the Campaign Objective:\n{{ $('Get many rows1').item.json.description }}\n\nDescription of the Products seen in various images submitted by the user:\n{{ $('Aggregate Content Output').item.json.content }}\n\nUse the Think tool to double check your output"
            },
            {
              "content": "=You are an expert image generation prompt engineer specializing in OpenAI's GPT-4o image generation capabilities. Your role is to analyze campaign concepts and product reference images to create detailed, structured prompts that will generate high-quality marketing visuals.\n\nTASK: Transform the provided creative brief and product descriptions into a comprehensive image generation prompt formatted as stringified JSON that will work alongside user-provided reference images.\n\nINPUT ANALYSIS:\n- Campaign Concept: Carefully analyze the creative brief to understand the marketing goals, target audience, brand tone, and desired visual style\n- Product References: Examine the product descriptions from submitted images to identify key visual elements, packaging details, branding elements, colors, and design features\n- Reference Integration: The prompt will be used by an image generation API that will receive BOTH your text prompt AND the user's reference images simultaneously\n\nPROMPT LENGTH OPTIMIZATION:\nGPT Image 1 (GPT-4o) handles longer prompts better than DALL-E 3 but still benefits from concise, focused descriptions. Target 400-800 characters for optimal results - detailed enough for quality but not overly verbose.\n\nESSENTIAL ELEMENTS (prioritize in order):\n1. CORE SCENE: Main subject + setting + reference integration\n2. VISUAL STYLE: Photography style, lighting, composition  \n3. QUALITY SPECIFICATIONS: Technical details (realistic, sharp, etc.)\n4. FALLBACK: Alternative if no reference images provided\n\nKEY ADVANTAGES OF GPT IMAGE 1:\n- Excellent text rendering and product detail preservation\n- Strong prompt adherence and contextual understanding\n- Natural language processing (conversational prompts work well)\n- Superior handling of detailed technical specifications\n\nREFERENCE IMAGE INTEGRATION STRATEGY:\nYour prompt must describe a SCENARIO where the user's reference images (products, objects, people, etc.) will be seamlessly integrated. Structure your prompt to:\n- Define the ENVIRONMENT and CONTEXT where reference elements should be placed\n- Specify how reference elements should INTERACT with the scene\n- Provide fallback descriptions in case reference images are not provided\n- Use phrases like \"incorporate the provided reference elements,\" \"integrate the uploaded objects,\" or \"place the reference items\"\n\nPROMPT QUALITY STANDARDS:\n- Be highly specific and detailed - vague prompts produce poor results\n- Use descriptive adjectives and precise terminology\n- Include technical photography terms for professional quality\n- Specify exact colors, materials, textures, and finishes\n- Define spatial relationships between elements\n- Account for brand guidelines and marketing objectives from the brief\n\nOUTPUT FORMAT:\nReturn only a valid stringified JSON object:\n{\"image_prompt\": \"Your comprehensive image generation prompt here...\"}\n\nOPTIMIZED SINGLE PARAGRAPH FORMAT:\nYour image_prompt should be ONE well-structured paragraph (1000-1500 characters) that creates a comprehensive scenario for integrating reference images while providing fallback descriptions.\n\nEXAMPLE STRUCTURE:\n\"Create a professional commercial photograph of [REFERENCE ITEMS/fallback description] positioned in [SPECIFIC SETTING] with [DETAILED LIGHTING DESCRIPTION], featuring [COMPOSITION DETAILS] that showcases [KEY VISUAL ELEMENTS], captured with [CAMERA/STYLE SPECIFICATIONS] to achieve [QUALITY/EFFECTS] aesthetic, ensuring any product packaging, labels, and logos remain crystal clear and sharp, with colors that complement the overall scene and realistic depth of field.\"\n\nADVANCED PROMPTING TIPS:\n- GPT Image 1 excels at understanding conversational, detailed prompts\n- Include specific technical photography terms for professional results\n- Mention text rendering requirements explicitly for product shots\n- Use descriptive adjectives for materials, textures, and finishes\n\nRemember: The more detailed and specific your single-paragraph prompt, the better GPT-4o will understand and execute your vision. Ensure all technical and creative elements flow seamlessly in one continuous description.",
              "role": "system"
            }
          ]
        },
        "jsonOutput": true,
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.openAi",
      "typeVersion": 1.8,
      "position": [2432, 400],
      "id": "5e50d565-80b5-45f8-8812-0ed0bfd494bc",
      "name": "Generate System Prompt Images GPT-Image",
      "credentials": {
        "openAiApi": {
          "id": "U46LK5mxeA2mY2dB",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "fieldToSplitOut": "upload_assets",
        "options": {}
      },
      "type": "n8n-nodes-base.splitOut",
      "typeVersion": 1,
      "position": [1920, 400],
      "id": "e14be100-c72f-40b0-8c95-4e1760a11db5",
      "name": "Split Out - Upload Assets"
    },
    {
      "parameters": {
        "fieldsToAggregate": {
          "fieldToAggregate": [
            {
              "fieldToAggregate": "content"
            },
            {
              "fieldToAggregate": "url"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.aggregate",
      "typeVersion": 1,
      "position": [1520, 400],
      "id": "cbba049e-137f-4363-be53-8c4b6ed99647",
      "name": "Aggregate Content Output"
    },
    {
      "parameters": {
        "fieldsToAggregate": {
          "fieldToAggregate": [
            {
              "fieldToAggregate": "upload_assets"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.aggregate",
      "typeVersion": 1,
      "position": [2112, 400],
      "id": "3be59d8b-6025-4920-9b24-ef52a267faeb",
      "name": "Aggregate Image URLs"
    },
    {
      "parameters": {
        "url": "https://api.kie.ai/api/v1/gpt4o-image/record-info",
        "sendQuery": true,
        "queryParameters": {
          "parameters": [
            {
              "name": "taskId",
              "value": "={{ $json.data.taskId }}"
            }
          ]
        },
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Authorization",
              "value": "=Bearer 82a77dac40a54697562f882bac975454"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [3296, 400],
      "id": "33fb5514-eafc-43b5-a445-d76b76aca267",
      "name": "Retrieve 4o Image"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "f8fc1069-c56a-483d-9257-6669d9eb9031",
              "leftValue": "={{ $json.code }}",
              "rightValue": 200,
              "operator": {
                "type": "number",
                "operation": "equals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [2944, 400],
      "id": "dd8c8c49-c9da-4e05-84b3-ff05259d42ad",
      "name": "If Success"
    },
    {
      "parameters": {
        "base": {
          "__rl": true,
          "value": "appH2OEGW78g0qSOw",
          "mode": "list",
          "cachedResultName": "AI-powered campaign concept generation",
          "cachedResultUrl": "https://airtable.com/appH2OEGW78g0qSOw"
        },
        "table": {
          "__rl": true,
          "value": "tbliQfQHTLEw6henQ",
          "mode": "list",
          "cachedResultName": "Concept Generation",
          "cachedResultUrl": "https://airtable.com/appH2OEGW78g0qSOw/tbliQfQHTLEw6henQ"
        },
        "id": "={{ $json.query.recordId }}",
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [720, 704],
      "id": "777f9de3-2ea2-4479-bac5-acfd0ba64e42",
      "name": "Get a Concept Record ID - Video Generation"
    },
    {
      "parameters": {
        "fieldToSplitOut": "['Images Assets']",
        "options": {}
      },
      "type": "n8n-nodes-base.splitOut",
      "typeVersion": 1,
      "position": [928, 704],
      "id": "ffb05d15-2b30-4593-9148-d11e76fe2217",
      "name": "Split Out - Images Assets"
    },
    {
      "parameters": {
        "fieldsToAggregate": {
          "fieldToAggregate": [
            {
              "fieldToAggregate": "url"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.aggregate",
      "typeVersion": 1,
      "position": [1328, 704],
      "id": "49711ac9-b42c-4652-b00b-579cb564e8b0",
      "name": "Aggregate - Images URLs"
    },
    {
      "parameters": {
        "jsCode": "// Get the URL string from the aggregate node\nconst urlString = $json.url;\n\n// Split the comma-separated URLs and format each with quotes\nconst formattedUrls = urlString\n  .flatMap(urlString => {\n    if (typeof urlString === \"string\") {\n      return urlString.split(',');\n    }\n    return [];\n  })\n  .map(url => `\"${url.trim()}\"`)\n  .join(',\\n');\n\n// Return the formatted result\nreturn {\n  formattedUrls: formattedUrls\n};"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [1536, 704],
      "id": "dce5da5f-9826-43d9-83a2-7e8acdfd66da",
      "name": "Code - Format URLs"
    },
    {
      "parameters": {
        "modelId": {
          "__rl": true,
          "value": "gpt-5-2025-08-07",
          "mode": "list",
          "cachedResultName": "GPT-5-2025-08-07"
        },
        "messages": {
          "values": [
            {
              "content": "=Here is the user request of the video generation:\n{{ $('Get a Concept Record ID - Video Generation').item.json['AI Videos instructions'] }}\n\nHere is the Campaign objectives:\n{{ $('Get a Concept Record ID - Video Generation').item.json.Campaign }}\n\n{{ $('Get a Concept Record ID - Video Generation').item.json.Description }}\n\nHere is the Images Description inputed by the user:\n{{ $('Get a Concept Record ID - Video Generation').item.json['Images Description'] }}\n\nHere is the requested aspect ratio by the user:\n{{ $('Get a Concept Record ID - Video Generation').item.json['Aspect Ratio'] }}\n\nUse the Think tool to double check your output"
            },
            {
              "content": "=# Veo3 Video Generation System Prompt\n\nYou are an expert video prompt engineer specializing in creating detailed, cinematic prompts for Veo3 video generation. Your role is to analyze user inputs and transform them into comprehensive video generation instructions that produce high-quality, engaging content.\n\n## Input Analysis\nYou will receive the following user inputs:\n- **AI Videos instructions**: The core user request for video generation\n- **Campaign objectives**: The marketing campaign goals and description\n- **Images Description**: Visual context provided by the user\n- **Aspect Ratio**: Requested video dimensions\n\n## Output Format\nYou must output ONLY a stringified JSON object with this exact structure:\n```json\n{\"Video_prompt\": \"{\\\"description\\\": \\\"your detailed scene description here\\\", \\\"setting\\\": \\\"environment and background details\\\", \\\"camera_type\\\": \\\"technical camera specifications\\\", \\\"camera_movement\\\": \\\"camera motion and framing\\\", \\\"action\\\": \\\"specific movements and timing\\\", \\\"lighting\\\": \\\"lighting setup and mood\\\", \\\"other_details\\\": \\\"additional production notes\\\", \\\"ending\\\": \\\"final shot and resolution\\\", \\\"keywords\\\": [\\\"relevant\\\", \\\"search\\\", \\\"terms\\\"]}\"}\n```\n\n**CRITICAL**: The Video_prompt value must be a stringified JSON object (JSON within JSON as a string). Ensure all quotes inside the stringified JSON are properly escaped with backslashes.\n\n## Prompt Construction Guidelines\n\n### Core Elements to Include:\n1. **Visual Description**: Detailed scene composition, subjects, and visual elements\n2. **Setting/Environment**: Location, atmosphere, and background details\n3. **Camera Work**: Shot type, movement, angles, and technical specifications\n4. **Lighting**: Mood, direction, and quality of light\n5. **Motion/Action**: Specific movements, transitions, and timing\n6. **Style**: Cinematic approach, visual aesthetic, and production quality\n7. **Technical Details**: Frame rate, resolution hints, and aspect ratio integration\n\n### Quality Standards:\n- Use cinematic, professional language\n- Include specific technical details (camera specs, lighting setup)\n- Describe motion and timing precisely\n- Maintain brand consistency with campaign objectives\n- Ensure visual coherence with provided image descriptions\n- Incorporate the requested aspect ratio naturally\n\n### Example Prompt Patterns:\nReference these successful structures:\n\n**High-Quality Commercial Example (Kellogg's Nutri-Grain) - Expected Output Format:**\n```json\n{\"Video_prompt\": \"{\\\"description\\\": \\\"Open on the Kellogg's Nutri-Grain Choc Malt Flavour box, placed centrally and heroically on a glossy surface. Product box is 100% sharp, all labels clear. Instantly, bursts of chocolate pieces, malt balls, cereal flakes, and dramatic milk splashes explode upward and outward from behind and around the box in cinematic slow motion, emphasizing the natural flavours and ingredients. Pieces freeze and suspend at peak motion, reveling in vibrant energy.\\\", \\\"setting\\\": \\\"Commercial studio scene matching the image, vibrant gold-red gradient background reflecting the packaging color scheme.\\\", \\\"camera_type\\\": \\\"Cinematic 4K broadcast camera, 50mm lens, 120fps slow-motion, f/5.6, ISO 200.\\\", \\\"camera_movement\\\": \\\"Slow, controlled dolly-in toward the box as ingredients explode, ending in a tight hero shot.\\\", \\\"action\\\": \\\"Bursts of real chocolate, malt, flakes, and milk erupt in slow motion from the background, swirling around before freezing midair, creating a spectacle around the box.\\\", \\\"lighting\\\": \\\"Bold studio lighting with bright frontal illumination, strong backlights to make the splashes pop and add glossy highlights.\\\", \\\"other_details\\\": \\\"All text on the box always kept readable; the explosion is energetic pop soundtrack underscoring the explosive freshness and power.\\\", \\\"ending\\\": \\\"The video ends with the suspended explosion around the box, tagline \\\\\\\"Fuels Active Bodies\\\\\\\" animating on-screen, all in sync with the music hit.\\\", \\\"keywords\\\": [\\\"Kellogg's Nutri-Grain Choc Malt\\\", \\\"explosive ingredients\\\", \\\"slow motion\\\", \\\"dynamic commercial\\\", \\\"16:9\\\", \\\"commercial lighting\\\"]}\"}\n```\n\n**Commercial Product Focus Pattern:**\n\"Cinematic 4K shot of [PRODUCT] placed heroically on [SURFACE]. [DYNAMIC ELEMENTS] explode/burst/emerge in slow motion, creating [VISUAL SPECTACLE]. Camera: [TECHNICAL SPECS]. Lighting: [SETUP]. Motion: [DETAILED ACTION]. Ending: [RESOLUTION].\"\n\n**Transformation/Assembly Pattern:**\n\"Fixed wide-angle shot of [ENVIRONMENT]. [CONTAINER/BOX] sits centrally and [INITIAL ACTION]. [TRANSFORMATION SEQUENCE] with precise timing. Elements: [LIST]. Motion: [ASSEMBLY DETAILS]. Style: cinematic, photorealistic.\"\n\n**Epic Reveal Pattern:**\n\"Epic cinematic shot in [LOCATION]. [CONTAINER] mechanically opens revealing [HERO PRODUCT]. Camera: [MOVEMENT]. Lighting: [DRAMATIC SETUP]. Environment: [ATMOSPHERE]. Motion: [REVEAL SEQUENCE].\"\n\n## Processing Instructions:\n1. Analyze the campaign objectives to understand the brand message and tone\n2. Incorporate the user's video instructions as the core creative direction\n3. Use the images description to inform visual style and composition\n4. Integrate the aspect ratio requirement seamlessly into camera and framing descriptions\n5. Create a cohesive narrative that serves the campaign goals\n6. Ensure all technical specifications support professional video production quality\n\n## Output Requirements:\n- Maximum prompt length: 500 words\n- Include specific technical details (camera, lighting, motion)\n- Maintain cinematic language and professional terminology\n- Ensure brand alignment with campaign objectives\n- Specify aspect ratio integration\n- Include timing and sequence details for complex actions\n- End with clear resolution or call-to-action alignment\n\n## Quality Checklist:\n- [ ] Cinematic and professional language used\n- [ ] Technical camera specifications included\n- [ ] Lighting setup described\n- [ ] Motion/action clearly detailed\n- [ ] Aspect ratio properly integrated\n- [ ] Campaign objectives reflected\n- [ ] Visual coherence with image descriptions\n- [ ] Professional production quality indicators included\n- [ ] Timing and sequence properly structured\n- [ ] Brand-appropriate tone maintained\n\nRemember: Your output must be ONLY the stringified JSON object with the Video_prompt containing a stringified JSON structure. Do not include any other text, explanations, or formatting outside of the required JSON structure. The Video_prompt value should be a complete JSON object converted to a string with properly escaped quotes.",
              "role": "system"
            }
          ]
        },
        "jsonOutput": true,
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.openAi",
      "typeVersion": 1.8,
      "position": [1744, 704],
      "id": "b3cfb3c0-9f4f-407c-a87e-55302ed8e276",
      "name": "Generate System Prompt Video VEO3"
    },
    {
      "parameters": {},
      "type": "@n8n/n8n-nodes-langchain.toolThink",
      "typeVersion": 1.1,
      "position": [1824, 816],
      "id": "3abea4b3-766c-42de-b3a0-32c0da892ce6",
      "name": "Think - VEO3"
    },
    {
      "parameters": {},
      "type": "@n8n/n8n-nodes-langchain.toolThink",
      "typeVersion": 1.1,
      "position": [2432, 544],
      "id": "c0b42458-064f-4977-a999-d89555ad7c4f",
      "name": "Think - GPT IMAG1"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "42ce1435-74b7-41c6-9a20-1017dc048a35",
              "leftValue": "={{ $json.code }}",
              "rightValue": 200,
              "operator": {
                "type": "number",
                "operation": "equals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [2304, 704],
      "id": "0b85e1da-c8d4-4eb9-aa62-5de163743608",
      "name": "If success"
    },
    {
      "parameters": {},
      "type": "n8n-nodes-base.limit",
      "typeVersion": 1,
      "position": [1136, 704],
      "id": "8f5d6631-f74b-4272-a6fb-2e45ac58cc74",
      "name": "Limit 1 Image - API Limit"
    },
    {
      "parameters": {
        "url": "https://api.kie.ai/api/v1/veo/record-info",
        "sendQuery": true,
        "queryParameters": {
          "parameters": [
            {
              "name": "taskId",
              "value": "={{ $json.data.taskId }}"
            }
          ]
        },
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Authorization",
              "value": "=Bearer {{ $('Get a Concept Record ID - Video Generation').item.json['API Key (from API Services) (from Agency)'][0] }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [2688, 704],
      "id": "6a1f31d4-ec7c-4e14-8663-08293c21b456",
      "name": "Retrieve Video - 1080p - video"
    },
    {
      "parameters": {
        "operation": "update",
        "base": {
          "__rl": true,
          "value": "appH2OEGW78g0qSOw",
          "mode": "list",
          "cachedResultName": "AI-powered campaign concept generation",
          "cachedResultUrl": "https://airtable.com/appH2OEGW78g0qSOw"
        },
        "table": {
          "__rl": true,
          "value": "tbliQfQHTLEw6henQ",
          "mode": "list",
          "cachedResultName": "Concept Generation",
          "cachedResultUrl": "https://airtable.com/appH2OEGW78g0qSOw/tbliQfQHTLEw6henQ"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "Run": false,
            "id": "={{ $('Webhook').item.json.query.recordId }}",
            "Video Status": "success",
            "Videos Assets": "={{ [ { \"url\": $json.data.response.resultUrls[0] } ] }}"
          },
          "matchingColumns": ["id"],
          "schema": [
            {
              "id": "id",
              "displayName": "id",
              "required": false,
              "defaultMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": false
            },
            {
              "id": "Campaign",
              "displayName": "Campaign",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Description",
              "displayName": "Description",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Upload Assets",
              "displayName": "Upload Assets",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Images Description",
              "displayName": "Images Description",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Run",
              "displayName": "Run",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "boolean",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Details Status",
              "displayName": "Details Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Start",
                  "value": "Start"
                },
                {
                  "name": "Generating",
                  "value": "Generating"
                },
                {
                  "name": "Completed",
                  "value": "Completed"
                },
                {
                  "name": "Error",
                  "value": "Error"
                }
              ],
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Personas",
              "displayName": "Personas",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Key messages",
              "displayName": "Key messages",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Brand touchpoints",
              "displayName": "Brand touchpoints",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "options": [],
              "readOnly": false,
              "removed": true
            },
            {
              "id": "AI Images instructions",
              "displayName": "AI Images instructions",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "AI Videos instructions",
              "displayName": "AI Videos instructions",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Number of Images",
              "displayName": "Number of Images",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "1",
                  "value": "1"
                },
                {
                  "name": "2",
                  "value": "2"
                },
                {
                  "name": "4",
                  "value": "4"
                },
                {
                  "name": "choose number",
                  "value": "choose number"
                }
              ],
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Image Size",
              "displayName": "Image Size",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "1:1",
                  "value": "1:1"
                },
                {
                  "name": "3:2",
                  "value": "3:2"
                },
                {
                  "name": "2:3",
                  "value": "2:3"
                },
                {
                  "name": "choose size",
                  "value": "choose size"
                }
              ],
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Image Status",
              "displayName": "Image Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Generating",
                  "value": "Generating"
                },
                {
                  "name": "Failed",
                  "value": "Failed"
                },
                {
                  "name": "Success",
                  "value": "Success"
                },
                {
                  "name": "waiting",
                  "value": "waiting"
                }
              ],
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Images Prompt ",
              "displayName": "Images Prompt ",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Images Assets",
              "displayName": "Images Assets",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "AI Model",
              "displayName": "AI Model",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "veo3",
                  "value": "veo3"
                },
                {
                  "name": "veo3_fast",
                  "value": "veo3_fast"
                },
                {
                  "name": "choose model",
                  "value": "choose model"
                }
              ],
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Aspect Ratio",
              "displayName": "Aspect Ratio",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "16:9",
                  "value": "16:9"
                },
                {
                  "name": "9:16",
                  "value": "9:16"
                },
                {
                  "name": "choose aspect ratio",
                  "value": "choose aspect ratio"
                }
              ],
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Video Status",
              "displayName": "Video Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "waiting",
                  "value": "waiting"
                },
                {
                  "name": "generating",
                  "value": "generating"
                },
                {
                  "name": "failed",
                  "value": "failed"
                },
                {
                  "name": "success",
                  "value": "success"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Videos Assets",
              "displayName": "Videos Assets",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Record ID",
              "displayName": "Record ID",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "Agency",
              "displayName": "Agency",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Created Time",
              "displayName": "Created Time",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "Last Modified Time",
              "displayName": "Last Modified Time",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "API Key (from API Services) (from Agency)",
              "displayName": "API Key (from API Services) (from Agency)",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [3072, 704],
      "id": "38baafcb-220a-40c6-b294-9ca8eb7a5cba",
      "name": "Update Video Assets Results"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "c1a499eb-dfc2-4da3-ac3c-064daa941f46",
              "leftValue": "={{ $json.code }}",
              "rightValue": 200,
              "operator": {
                "type": "number",
                "operation": "equals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [2880, 704],
      "id": "3377c7f2-6b86-4ccb-afc5-864f721044bd",
      "name": "If Success Video"
    },
    {
      "parameters": {
        "operation": "update",
        "base": {
          "__rl": true,
          "value": "appH2OEGW78g0qSOw",
          "mode": "list",
          "cachedResultName": "AI-powered campaign concept generation",
          "cachedResultUrl": "https://airtable.com/appH2OEGW78g0qSOw"
        },
        "table": {
          "__rl": true,
          "value": "tbliQfQHTLEw6henQ",
          "mode": "list",
          "cachedResultName": "Concept Generation",
          "cachedResultUrl": "https://airtable.com/appH2OEGW78g0qSOw/tbliQfQHTLEw6henQ"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "Run": false,
            "id": "={{ $('Webhook').item.json.query.recordId }}",
            "Video Status": "failed"
          },
          "matchingColumns": ["id"],
          "schema": [
            {
              "id": "id",
              "displayName": "id",
              "required": false,
              "defaultMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": false
            },
            {
              "id": "Campaign",
              "displayName": "Campaign",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Description",
              "displayName": "Description",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Upload Assets",
              "displayName": "Upload Assets",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Images Description",
              "displayName": "Images Description",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Run",
              "displayName": "Run",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "boolean",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Details Status",
              "displayName": "Details Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Start",
                  "value": "Start"
                },
                {
                  "name": "Generating",
                  "value": "Generating"
                },
                {
                  "name": "Completed",
                  "value": "Completed"
                },
                {
                  "name": "Error",
                  "value": "Error"
                }
              ],
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Personas",
              "displayName": "Personas",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Key messages",
              "displayName": "Key messages",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Brand touchpoints",
              "displayName": "Brand touchpoints",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "options": [],
              "readOnly": false,
              "removed": true
            },
            {
              "id": "AI Images instructions",
              "displayName": "AI Images instructions",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "AI Videos instructions",
              "displayName": "AI Videos instructions",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Number of Images",
              "displayName": "Number of Images",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "1",
                  "value": "1"
                },
                {
                  "name": "2",
                  "value": "2"
                },
                {
                  "name": "4",
                  "value": "4"
                },
                {
                  "name": "choose number",
                  "value": "choose number"
                }
              ],
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Image Size",
              "displayName": "Image Size",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "1:1",
                  "value": "1:1"
                },
                {
                  "name": "3:2",
                  "value": "3:2"
                },
                {
                  "name": "2:3",
                  "value": "2:3"
                },
                {
                  "name": "choose size",
                  "value": "choose size"
                }
              ],
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Image Status",
              "displayName": "Image Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Generating",
                  "value": "Generating"
                },
                {
                  "name": "Failed",
                  "value": "Failed"
                },
                {
                  "name": "Success",
                  "value": "Success"
                },
                {
                  "name": "waiting",
                  "value": "waiting"
                }
              ],
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Images Prompt ",
              "displayName": "Images Prompt ",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Images Assets",
              "displayName": "Images Assets",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "AI Model",
              "displayName": "AI Model",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "veo3",
                  "value": "veo3"
                },
                {
                  "name": "veo3_fast",
                  "value": "veo3_fast"
                },
                {
                  "name": "choose model",
                  "value": "choose model"
                }
              ],
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Aspect Ratio",
              "displayName": "Aspect Ratio",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "16:9",
                  "value": "16:9"
                },
                {
                  "name": "9:16",
                  "value": "9:16"
                },
                {
                  "name": "choose aspect ratio",
                  "value": "choose aspect ratio"
                }
              ],
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Video Status",
              "displayName": "Video Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "waiting",
                  "value": "waiting"
                },
                {
                  "name": "generating",
                  "value": "generating"
                },
                {
                  "name": "failed",
                  "value": "failed"
                },
                {
                  "name": "success",
                  "value": "success"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Videos Assets",
              "displayName": "Videos Assets",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Record ID",
              "displayName": "Record ID",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "Agency",
              "displayName": "Agency",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Created Time",
              "displayName": "Created Time",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "Last Modified Time",
              "displayName": "Last Modified Time",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "API Key (from API Services) (from Agency)",
              "displayName": "API Key (from API Services) (from Agency)",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [2880, 832],
      "id": "e21f8113-ee9f-4b2f-9c30-585c4f9c3f8c",
      "name": "Update Getting Failed"
    },
    {
      "parameters": {
        "operation": "update",
        "base": {
          "__rl": true,
          "value": "appH2OEGW78g0qSOw",
          "mode": "list",
          "cachedResultName": "AI-powered campaign concept generation",
          "cachedResultUrl": "https://airtable.com/appH2OEGW78g0qSOw"
        },
        "table": {
          "__rl": true,
          "value": "tbliQfQHTLEw6henQ",
          "mode": "list",
          "cachedResultName": "Concept Generation",
          "cachedResultUrl": "https://airtable.com/appH2OEGW78g0qSOw/tbliQfQHTLEw6henQ"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "id": "={{ $('Webhook').item.json.query.recordId }}",
            "Run": false,
            "Video Status": "failed"
          },
          "matchingColumns": ["id"],
          "schema": [
            {
              "id": "id",
              "displayName": "id",
              "required": false,
              "defaultMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": false
            },
            {
              "id": "Campaign",
              "displayName": "Campaign",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Description",
              "displayName": "Description",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Upload Assets",
              "displayName": "Upload Assets",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Images Description",
              "displayName": "Images Description",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Run",
              "displayName": "Run",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "boolean",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Details Status",
              "displayName": "Details Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Start",
                  "value": "Start"
                },
                {
                  "name": "Generating",
                  "value": "Generating"
                },
                {
                  "name": "Completed",
                  "value": "Completed"
                },
                {
                  "name": "Error",
                  "value": "Error"
                }
              ],
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Personas",
              "displayName": "Personas",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Key messages",
              "displayName": "Key messages",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Brand touchpoints",
              "displayName": "Brand touchpoints",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "options": [],
              "readOnly": false,
              "removed": true
            },
            {
              "id": "AI Images instructions",
              "displayName": "AI Images instructions",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "AI Videos instructions",
              "displayName": "AI Videos instructions",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Number of Images",
              "displayName": "Number of Images",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "1",
                  "value": "1"
                },
                {
                  "name": "2",
                  "value": "2"
                },
                {
                  "name": "4",
                  "value": "4"
                },
                {
                  "name": "choose number",
                  "value": "choose number"
                }
              ],
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Image Size",
              "displayName": "Image Size",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "1:1",
                  "value": "1:1"
                },
                {
                  "name": "3:2",
                  "value": "3:2"
                },
                {
                  "name": "2:3",
                  "value": "2:3"
                },
                {
                  "name": "choose size",
                  "value": "choose size"
                }
              ],
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Image Status",
              "displayName": "Image Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Generating",
                  "value": "Generating"
                },
                {
                  "name": "Failed",
                  "value": "Failed"
                },
                {
                  "name": "Success",
                  "value": "Success"
                },
                {
                  "name": "waiting",
                  "value": "waiting"
                }
              ],
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Images Prompt ",
              "displayName": "Images Prompt ",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Images Assets",
              "displayName": "Images Assets",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "AI Model",
              "displayName": "AI Model",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "veo3",
                  "value": "veo3"
                },
                {
                  "name": "veo3_fast",
                  "value": "veo3_fast"
                },
                {
                  "name": "choose model",
                  "value": "choose model"
                }
              ],
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Aspect Ratio",
              "displayName": "Aspect Ratio",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "16:9",
                  "value": "16:9"
                },
                {
                  "name": "9:16",
                  "value": "9:16"
                },
                {
                  "name": "choose aspect ratio",
                  "value": "choose aspect ratio"
                }
              ],
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Video Status",
              "displayName": "Video Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "waiting",
                  "value": "waiting"
                },
                {
                  "name": "generating",
                  "value": "generating"
                },
                {
                  "name": "failed",
                  "value": "failed"
                },
                {
                  "name": "success",
                  "value": "success"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Videos Assets",
              "displayName": "Videos Assets",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Record ID",
              "displayName": "Record ID",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "Agency",
              "displayName": "Agency",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Created Time",
              "displayName": "Created Time",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "Last Modified Time",
              "displayName": "Last Modified Time",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "API Key (from API Services) (from Agency)",
              "displayName": "API Key (from API Services) (from Agency)",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [2304, 832],
      "id": "87b3127e-df49-4aba-836a-22be88919975",
      "name": "Update Status Video Generation Failed"
    },
    {
      "parameters": {
        "amount": 180
      },
      "type": "n8n-nodes-base.wait",
      "typeVersion": 1.1,
      "position": [3088, 272],
      "id": "9db0eac7-e63c-4215-940b-dba395f50aca",
      "name": "Wait 180s",
      "webhookId": "8f6a7bec-abd2-48b8-b79d-4235051beda1"
    },
    {
      "parameters": {
        "amount": 240
      },
      "type": "n8n-nodes-base.wait",
      "typeVersion": 1.1,
      "position": [2496, 704],
      "id": "c931ad3f-1476-4120-ac2e-8f39ef6c3cb9",
      "name": "Wait 300s Videos",
      "webhookId": "8f6a7bec-abd2-48b8-b79d-4235051beda1"
    },
    {
      "parameters": {
        "content": "          Image Analyst LLM",
        "height": 288,
        "width": 400,
        "color": 4
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [1088, 336],
      "typeVersion": 1,
      "id": "1fc08416-b341-4785-af3a-a94b3adf68b4",
      "name": "Sticky Note"
    },
    {
      "parameters": {
        "content": "    Image Prompt Generator",
        "height": 288,
        "width": 256,
        "color": 6
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [2416, 336],
      "typeVersion": 1,
      "id": "0ddfa726-b275-4c5d-83c9-99c45f40dd00",
      "name": "Sticky Note1"
    },
    {
      "parameters": {
        "content": "    KIE AI Image",
        "height": 288,
        "width": 192,
        "color": 5
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [2688, 336],
      "typeVersion": 1,
      "id": "913d9f1c-5e77-48c7-bfdf-4339361ff694",
      "name": "Sticky Note2"
    },
    {
      "parameters": {
        "content": "    KIE AI Image",
        "height": 320,
        "width": 208,
        "color": 5
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [3232, 320],
      "typeVersion": 1,
      "id": "1143de97-5c2a-4fef-8f49-d30cbd0ad395",
      "name": "Sticky Note3"
    },
    {
      "parameters": {
        "content": "    Video Prompt Generator",
        "height": 320,
        "width": 272,
        "color": 6
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [1728, 624],
      "typeVersion": 1,
      "id": "ac6a5cb7-ff0d-4e68-96bd-7cf21be91056",
      "name": "Sticky Note4"
    },
    {
      "parameters": {
        "content": "     KIE AI Video",
        "height": 256,
        "width": 224,
        "color": 5
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [2032, 624],
      "typeVersion": 1,
      "id": "cec7f215-2623-49f2-851a-cf4b5dc67117",
      "name": "Sticky Note5"
    },
    {
      "parameters": {
        "content": "    KIE AI Video",
        "height": 240,
        "width": 224,
        "color": 5
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [2624, 640],
      "typeVersion": 1,
      "id": "0cd4bb81-f826-45bf-b032-d6a2b1fc3e54",
      "name": "Sticky Note6"
    },
    {
      "parameters": {
        "content": "                        Image File Processing",
        "height": 224,
        "width": 816,
        "color": 7
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [864, 640],
      "typeVersion": 1,
      "id": "4d564fe1-d8e7-4652-aba9-e9198c333428",
      "name": "Sticky Note7"
    },
    {
      "parameters": {
        "content": "                        Image File Processing",
        "height": 224,
        "width": 928,
        "color": 7
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [1488, 336],
      "typeVersion": 1,
      "id": "d3bb619d-0cf1-41bd-9447-5af2eb7704ee",
      "name": "Sticky Note8"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://api.kie.ai/api/v1/gpt4o-image/generate",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Authorization",
              "value": "=Bearer {{ $('Get Concept Record ID - Image Generation - 2').item.json['API Key (from API Services) (from Agency)'][0] }}"
            }
          ]
        },
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={\n  \"filesUrl\": [\n{{ $('Code').item.json.formattedUrls }}\n  ],\n  \"prompt\": \"Take the product in the image and place it in this scenario: {{ $json.message.content.image_prompt }}\",\n  \"size\": \"{{ $('Get Concept Record ID - Image Generation - 2').item.json['Image Size'] }}\",\n  \"nVariants\": {{ $('Get Concept Record ID - Image Generation - 2').item.json['Number of Images'] }}\n}",
        "options": {
          "response": {
            "response": {}
          }
        }
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [3472, 704],
      "id": "bc97cd0a-c5d9-4ab6-bf40-049675d37c01",
      "name": "Generate 4o Images -",
      "alwaysOutputData": false,
      "disabled": true
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://api.kie.ai/api/v1/gpt4o-image/generate",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Authorization",
              "value": "=Bearer 82a77dac40a54697562f882bac975454"
            }
          ]
        },
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "filesUrl",
              "value": "={{ $('Code').item.json.formattedUrls }}"
            },
            {
              "name": "prompt",
              "value": "=Take the product in the image and place it in this scenario: {{ $json.message.content.image_prompt }}"
            },
            {
              "name": "size",
              "value": "={{ $('Get many rows').item.json.image_size }}"
            },
            {
              "name": "nVariants",
              "value": "={{ $('Get many rows').item.json.number_of_images }}"
            }
          ]
        },
        "options": {
          "response": {
            "response": {}
          }
        }
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [2736, 400],
      "id": "ea27aeb3-a133-4901-9623-0c6f395a18bd",
      "name": "Generate 4o Images",
      "alwaysOutputData": false
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://api.kie.ai/api/v1/veo/generate",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Authorization",
              "value": "=Bearer {{ $('Get a Concept Record ID - Video Generation').item.json['API Key (from API Services) (from Agency)'][0] }}"
            },
            {
              "name": "Content-Type",
              "value": "application/json"
            }
          ]
        },
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={\n  \"prompt\": {{ $json.message.content.Video_prompt }},\n  \"imageUrls\": [\n{{ $('Code - Format URLs').item.json.formattedUrls }}\n  ],\n  \"model\": \"{{ $('Get a Concept Record ID - Video Generation').item.json['AI Model'] }}\",\n  \"watermark\": \"agenia\",\n  \"aspectRatio\": \"{{ $('Get a Concept Record ID - Video Generation').item.json['Aspect Ratio'] }}\"\n}",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [2096, 704],
      "id": "506cbbda-8653-41bc-999a-d2c4e1dab05c",
      "name": "Generate Videos VEO 3"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://api.kie.ai/api/v1/veo/generate",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Authorization",
              "value": "=Bearer {{ $('Get a Concept Record ID - Video Generation').item.json['API Key (from API Services) (from Agency)'][0] }}"
            }
          ]
        },
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "prompt",
              "value": "={{ $json.message.content.Video_Prompt }}"
            },
            {
              "name": "imageUrls",
              "value": "={{ $('Code - Format URLs').item.json.formattedUrls }}"
            },
            {
              "name": "model",
              "value": "={{ $('Get a Concept Record ID - Video Generation').item.json['AI Model'] }}"
            },
            {
              "name": "aspectRatio",
              "value": "={{ $('Get a Concept Record ID - Video Generation').item.json['Aspect Ratio'] }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [3296, 704],
      "id": "9177b217-cabb-4ba4-a150-778e397db348",
      "name": "Generate Videos VEO3",
      "disabled": true
    },
    {
      "parameters": {
        "operation": "getAll",
        "tableId": "concept_generation",
        "returnAll": true
      },
      "type": "n8n-nodes-base.supabase",
      "typeVersion": 1,
      "position": [720, 400],
      "id": "674d2af6-6386-440f-a0e2-8cd1f19fa12f",
      "name": "Get many rows",
      "credentials": {
        "supabaseApi": {
          "id": "DGHvrTDlfvkwgp8u",
          "name": "Supabase Avatar"
        }
      }
    },
    {
      "parameters": {},
      "type": "n8n-nodes-base.manualTrigger",
      "typeVersion": 1,
      "position": [160, 752],
      "id": "97d96335-fc23-4da5-8f7e-1c7a4daf8590",
      "name": "When clicking ‘Execute workflow’"
    },
    {
      "parameters": {
        "operation": "getAll",
        "tableId": "concept_generation",
        "returnAll": true
      },
      "type": "n8n-nodes-base.supabase",
      "typeVersion": 1,
      "position": [1712, 400],
      "id": "50660080-d0ab-45d8-8f94-8ec1d560e4ad",
      "name": "Get many rows1",
      "credentials": {
        "supabaseApi": {
          "id": "DGHvrTDlfvkwgp8u",
          "name": "Supabase Avatar"
        }
      }
    },
    {
      "parameters": {
        "path": "5c50a899-4a7e-4fdd-af08-64f97d7c42a6",
        "options": {}
      },
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2.1,
      "position": [160, 560],
      "id": "d1b5fbc2-f469-49df-91ed-5d165cd5eddf",
      "name": "Webhook1",
      "webhookId": "5c50a899-4a7e-4fdd-af08-64f97d7c42a6"
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "leftValue": "",
                    "rightValue": "",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    },
                    "id": "e9d22a6c-8f79-4eec-918a-e7f2e2097f55"
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "generateImages"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "4c514d81-8d1e-4317-8991-de718b06d4e4",
                    "leftValue": "",
                    "rightValue": "generateVideo",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "generateVideo"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.2,
      "position": [448, 560],
      "id": "8142ac28-6e32-482e-8e6b-b0a03dd5004f",
      "name": "Switch"
    }
  ],
  "pinData": {},
  "connections": {
    "Split Out Uploaded Asset": {
      "main": [
        [
          {
            "node": "Loop Over Image Asset",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Loop Over Image Asset": {
      "main": [
        [
          {
            "node": "Aggregate Content Output",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Analyze image",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Analyze image": {
      "main": [
        [
          {
            "node": "Loop Over Image Asset",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code": {
      "main": [
        [
          {
            "node": "Generate System Prompt Images GPT-Image",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Generate System Prompt Images GPT-Image": {
      "main": [
        [
          {
            "node": "Generate 4o Images",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Split Out - Upload Assets": {
      "main": [
        [
          {
            "node": "Aggregate Image URLs",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Aggregate Content Output": {
      "main": [
        [
          {
            "node": "Get many rows1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Aggregate Image URLs": {
      "main": [
        [
          {
            "node": "Code",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If Success": {
      "main": [
        [
          {
            "node": "Wait 180s",
            "type": "main",
            "index": 0
          }
        ],
        []
      ]
    },
    "Retrieve 4o Image": {
      "main": [[]]
    },
    "Get a Concept Record ID - Video Generation": {
      "main": [
        [
          {
            "node": "Split Out - Images Assets",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Split Out - Images Assets": {
      "main": [
        [
          {
            "node": "Limit 1 Image - API Limit",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Aggregate - Images URLs": {
      "main": [
        [
          {
            "node": "Code - Format URLs",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code - Format URLs": {
      "main": [
        [
          {
            "node": "Generate System Prompt Video VEO3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Think - VEO3": {
      "ai_tool": [
        [
          {
            "node": "Generate System Prompt Video VEO3",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Think - GPT IMAG1": {
      "ai_tool": [
        [
          {
            "node": "Generate System Prompt Images GPT-Image",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Generate System Prompt Video VEO3": {
      "main": [
        [
          {
            "node": "Generate Videos VEO 3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If success": {
      "main": [
        [
          {
            "node": "Wait 300s Videos",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Update Status Video Generation Failed",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Limit 1 Image - API Limit": {
      "main": [
        [
          {
            "node": "Aggregate - Images URLs",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Retrieve Video - 1080p - video": {
      "main": [
        [
          {
            "node": "If Success Video",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If Success Video": {
      "main": [
        [
          {
            "node": "Update Video Assets Results",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Update Getting Failed",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Wait 180s": {
      "main": [
        [
          {
            "node": "Retrieve 4o Image",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Wait 300s Videos": {
      "main": [
        [
          {
            "node": "Retrieve Video - 1080p - video",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Generate 4o Images": {
      "main": [
        [
          {
            "node": "If Success",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Generate Videos VEO 3": {
      "main": [
        [
          {
            "node": "If success",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get many rows": {
      "main": [
        [
          {
            "node": "Split Out Uploaded Asset",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "When clicking ‘Execute workflow’": {
      "main": [[]]
    },
    "Get many rows1": {
      "main": [
        [
          {
            "node": "Split Out - Upload Assets",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Webhook1": {
      "main": [
        [
          {
            "node": "Switch",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Switch": {
      "main": [
        [
          {
            "node": "Get many rows",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Get a Concept Record ID - Video Generation",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": true,
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "23c8f650-ab5f-4255-926b-0178bb749ec0",
  "meta": {
    "templateCredsSetupCompleted": true,
    "instanceId": "fe9d3a12f258c7c25e0241bdac4abdc1d2d4cbca003a5fd500ebff17b6038d7a"
  },
  "id": "Pv5nijxvHk0OP9vY",
  "tags": []
}
